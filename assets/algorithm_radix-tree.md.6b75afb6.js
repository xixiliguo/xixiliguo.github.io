import{_ as s,c as a,o as n,a as e}from"./app.526dca4e.js";var t="/img/radix-tree.jpg",p="/img/insert-tree-node.jpg";const u=JSON.parse('{"title":"Radix Tree\u4ECB\u7ECD\u4E0Ehttprouter\u6E90\u7801\u7B14\u8BB0","description":"","frontmatter":{"title":"Radix Tree\u4ECB\u7ECD\u4E0Ehttprouter\u6E90\u7801\u7B14\u8BB0","author":"Peter Wang","tags":["radix-tree","httprouter"],"date":"2019-03-23T09:52:44.000Z","draft":false},"headers":[],"relativePath":"algorithm/radix-tree.md","lastUpdated":1657810449000}'),l={name:"algorithm/radix-tree.md"},o=e(`<p>Trie\u53C8\u53EB\u524D\u7F00\u6811, \u5E7F\u6CDB\u5E94\u7528\u4E8E\u5B57\u7B26\u4E32\u641C\u7D22. \u5B83\u662F\u591A\u53C9\u6811\u7ED3\u6784, \u6BCF\u4E2A\u8282\u70B9\u4EE3\u8868\u4E00\u4E2A\u5B57\u7B26, \u4ECE\u6839\u51FA\u53D1\u5230\u53F6\u5B50, \u6240\u8BBF\u95EE\u8FC7\u7684\u5B57\u7B26\u8FDE\u63A5\u8D77\u6765\u5C31\u662F\u4E00\u4E2A\u5B57\u7B26\u4E32.<br> Radix tree \u662FTrie\u7684\u4E00\u79CD\u4F18\u5316\u65B9\u5F0F, \u5BF9\u7A7A\u95F4\u8FDB\u4E00\u6B65\u538B\u7F29.</p><h1 id="\u6982\u8FF0" tabindex="-1">\u6982\u8FF0 <a class="header-anchor" href="#\u6982\u8FF0" aria-hidden="true">#</a></h1><p>Trie\u53C8\u53EB\u524D\u7F00\u6811, \u5E7F\u6CDB\u5E94\u7528\u4E8E\u5B57\u7B26\u4E32\u641C\u7D22. \u5B83\u662F\u591A\u53C9\u6811\u7ED3\u6784, \u6BCF\u4E2A\u8282\u70B9\u4EE3\u8868\u4E00\u4E2A\u5B57\u7B26, \u4ECE\u6839\u51FA\u53D1\u5230\u53F6\u5B50, \u6240\u8BBF\u95EE\u8FC7\u7684\u5B57\u7B26\u8FDE\u63A5\u8D77\u6765\u5C31\u662F\u4E00\u4E2A\u5B57\u7B26\u4E32.<br> Radix tree \u662FTrie\u7684\u4E00\u79CD\u4F18\u5316\u65B9\u5F0F, \u5BF9\u7A7A\u95F4\u8FDB\u4E00\u6B65\u538B\u7F29.</p><p>Trie\u53EF\u7528\u5982\u4E0B\u7C7B\u578B\u8868\u793A</p><div class="language-go"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Trie</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">struct</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    isLeaf </span><span style="color:#C792EA;">bool</span><span style="color:#A6ACCD;">      </span><span style="color:#676E95;font-style:italic;">//\u7528\u4E8E\u8868\u793A\u8BE5\u8282\u70B9\u662F\u4E0D\u662F\u4E00\u4E2A\u5B57\u7B26\u4E32\u7684\u7ED3\u5C3E</span></span>
<span class="line"><span style="color:#A6ACCD;">    child </span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;">Trie</span></span>
<span class="line"><span style="color:#A6ACCD;">    value </span><span style="color:#C792EA;">byte</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u4E0B\u56FE\u5DE6\u4FA7\u662F\u5B57\u7B26\u4E32 sex,seed,sleep,son \u56DB\u4E2A\u5B57\u6BB5\u4E32\u7684Trie\u6570\u636E\u7ED3\u6784\u8868\u793A. \u53EF\u7528\u770B\u5230sleep\u8FD9\u4E2A\u5B57\u7B26\u4E32\u9700\u89815\u4E2A\u8282\u70B9\u8868\u793A. \u5176\u5B9Ee\u540E\u9762\u53EA\u8DDF\u4E00\u4E2Ap, \u4E5F\u5C31\u662F\u53EA\u6709\u4E00\u4E2A\u5B50\u8282\u70B9, \u662F\u5B8C\u5168\u53EF\u4EE5\u548C\u7236\u8282\u70B9\u538B\u7F29\u5408\u5E76\u7684. \u53F3\u4FA7\u662F\u4F18\u5316\u540E\u7684\u6570\u636E\u7ED3\u6784, \u8282\u7701\u4E86\u7A7A\u95F4,\u540C\u65F6\u4E5F\u63D0\u9AD8\u4E86\u67E5\u8BE2\u6548\u7387(\u5DE6\u8FB9\u5B57\u7B26\u4E32<code>sleep</code>\u67E5\u8BE2\u9700\u89815\u6B65, \u53F3\u8FB9\u53EA\u9700\u89813\u6B65), \u8FD9\u5C31\u662Fradix tree. <img src="`+t+`" alt="radix-tree"></p><h1 id="httproute\u7684\u5B9E\u73B0" tabindex="-1">httproute\u7684\u5B9E\u73B0 <a class="header-anchor" href="#httproute\u7684\u5B9E\u73B0" aria-hidden="true">#</a></h1><p>golang\u8BED\u8A00\u5B9E\u73B0\u7684httproute\u662F\u4E2A\u9AD8\u6027\u80FD\u7684http\u8DEF\u7531\u5206\u53D1\u5668. \u5B83\u8D1F\u8D23\u5C06\u5F88\u591A\u4E2A\u8DEF\u5F84\u6CE8\u518C\u5230\u4E0D\u540C\u5230\u5904\u7406\u51FD\u6570. \u5F53\u6536\u5230\u8BF7\u6C42\u540E, \u5FEB\u901F\u67E5\u627E\u662F\u5426\u8BF7\u6C42\u7684http\u8DEF\u5F84\u6709\u5BF9\u5E94\u7684\u5904\u7406\u5668,\u5E76\u8FDB\u884C\u4E0B\u4E00\u6B65\u7684\u4E1A\u52A1\u903B\u8F91\u5904\u7406. \u4E3B\u8981\u4F7F\u7528radix tree\u5B9E\u73B0\u4E86\u9AD8\u6548\u7684\u8DEF\u5F84\u67E5\u627E.<br> \u540C\u65F6\u8DEF\u5F84\u8FD8\u652F\u6301\u4E24\u79CD\u901A\u914D\u7B26\u5339\u914D, \u5177\u4F53\u7528\u6CD5\u89C1readme</p><p>\u5982\u4E0B\u662F\u8282\u70B9\u7684\u6570\u636E\u7ED3\u6784, <code>indices</code>\u5B57\u7B26\u548C<code>children</code>\u91CC\u7684\u8282\u70B9\u6392\u5217\u987A\u5E8F\u4E00\u4E00\u5BF9\u5E94. handle\u975Enil\u5219\u8BF4\u660E\u662F\u4E00\u4E2A\u5B57\u7B26\u4E32\u7684\u7EC8\u70B9.</p><div class="language-go"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">node</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">struct</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	path      </span><span style="color:#C792EA;">string</span><span style="color:#A6ACCD;">      </span><span style="color:#676E95;font-style:italic;">// \u8BE5\u8282\u70B9\u5BF9\u5E94\u7684path</span></span>
<span class="line"><span style="color:#A6ACCD;">	wildChild </span><span style="color:#C792EA;">bool</span><span style="color:#A6ACCD;">        </span><span style="color:#676E95;font-style:italic;">// \u662F\u5426\u901A\u914D</span></span>
<span class="line"><span style="color:#A6ACCD;">	nType     nodeType    </span><span style="color:#676E95;font-style:italic;">// \u8868\u793A\u8282\u70B9\u7C7B\u578B</span></span>
<span class="line"><span style="color:#A6ACCD;">	maxParams </span><span style="color:#C792EA;">uint8</span></span>
<span class="line"><span style="color:#A6ACCD;">	indices   </span><span style="color:#C792EA;">string</span><span style="color:#A6ACCD;">      </span><span style="color:#676E95;font-style:italic;">// \u5B50\u8282\u70B9path\u7684\u7B2C\u4E00\u4E2Abyte\u7684\u96C6\u5408</span></span>
<span class="line"><span style="color:#A6ACCD;">	children  </span><span style="color:#89DDFF;">[]*</span><span style="color:#A6ACCD;">node    </span><span style="color:#676E95;font-style:italic;">//  \u5B50\u8282\u70B9</span></span>
<span class="line"><span style="color:#A6ACCD;">	handle    Handle</span></span>
<span class="line"><span style="color:#A6ACCD;">	priority  </span><span style="color:#C792EA;">uint32</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">const</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">	static nodeType </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">iota</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// \u666E\u901A\u8282\u70B9</span></span>
<span class="line"><span style="color:#A6ACCD;">	root                   </span><span style="color:#676E95;font-style:italic;">// \u6839\u8282\u70B9</span></span>
<span class="line"><span style="color:#A6ACCD;">    param                  </span><span style="color:#676E95;font-style:italic;">// \u547D\u4EE4\u53C2\u6570\u5BF9\u5E94\u7684\u8282\u70B9  :name </span></span>
<span class="line"><span style="color:#A6ACCD;">	catchAll               </span><span style="color:#676E95;font-style:italic;">// \u5339\u914D\u540E\u9762\u6240\u6709\u5B57\u7B26\u7684\u8282\u70B9    *all </span></span>
<span class="line"><span style="color:#89DDFF;">)</span></span>
<span class="line"></span></code></pre></div><p>\u6B64\u5904\u5148\u4E0D\u8003\u8651\u901A\u914D\u7B26\u8FD9\u5757\u7684\u903B\u8F91,\u5047\u8BBE\u5F85\u5339\u914D\u7684\u4E3Acurpath,\u5F85\u6BD4\u8F83\u7684node\u5148\u8BBE\u7F6E\u4E3A\u6839\u8282\u70B9.<br> \u63D2\u5165\u65B0\u5B57\u7B26\u4E32\u7684\u903B\u8F91\u5982\u4E0B:</p><ol><li>\u516C\u5171\u524D\u7F00\u957F\u5EA6\u5C0F\u4E8Enode.path: \u5219\u9700\u8981\u5C06node split\u4E3A\u4E24\u4E2Anode. parent node\u7684path\u4E3A\u516C\u5171\u524D\u7F00, child node\u7684path\u4E3A\u539Fnode.path\u5254\u9664\u516C\u5171b. \u524D\u7F00\u90E8\u5206\u540E\u7684path,\u7EE7\u7EED\u6B65\u9AA42</li><li>\u516C\u5171\u524D\u7F00\u957F\u5EA6\u5C0F\u4E8Ecurpath, \u5219\u8FDB\u5165\u6B65\u9AA43, \u5426\u5219\u6B65\u9AA44</li><li>\u8BBE\u7F6Ecurpath\u4E3A curpath\u5254\u9664\u516C\u5171\u524D\u7F00\u540E\u7684\u90E8\u5206. \u904D\u5386node.indices\u7684\u6BCF\u4E00\u4E2Abyte, \u4E0Ecurpath\u7684\u7B2C\u4E00\u4E2Abyte\u6BD4\u8F83.<br> \u6709\u76F8\u7B49\u7684,\u5219\u8BBE\u7F6Enode\u4E3A\u5339\u914D\u7684child node, \u8DF3\u56DE\u6B65\u9AA41\u7EE7\u7EED\u5FAA\u73AF.<br> \u6CA1\u6709\u76F8\u7B49\u7684, \u5219\u65B0\u5EFA\u53F6\u5B50\u8282\u70B9, \u9000\u51FA</li><li>\u516C\u5171\u524D\u7F00\u957F\u5EA6\u7B49\u4E8Enode.path: \u8BBE\u7F6E\u4E3A\u53F6\u5B50\u8282\u70B9, \u9000\u51FA</li></ol><p>\u5982\u4E0B\u5DE6\u8FB9\u662F/sex,/sleep,/son\u7684\u5185\u90E8\u5448\u73B0, \u53F3\u8FB9\u662F\u63D2\u5165/seed \u540E\u5185\u90E8\u7684\u5448\u73B0<br><img src="`+p+'" alt="radix-tree"></p><p>\u4EE3\u7801\u5B9E\u73B0\u4E3B\u8981\u662F\u5728<code>func (n *node) addRoute(path string, handle Handle)</code> \u548C <code>func (n *node) insertChild(numParams uint8, path, fullPath string, handle Handle)</code>. \u56E0\u4E3Ahttproute\u52A0\u4E86\u5F88\u591A\u5BF9\u901A\u914D\u7B26\u8DEF\u5F84\u7684\u7279\u6B8A\u5904\u7406, \u53EF\u4EE5\u5148\u770B<code>go-radix</code>\u4E86\u89E3\u4E0B\u901A\u7528radix-tree\u7684\u5B9E\u73B0.</p><h1 id="\u53C2\u8003" tabindex="-1">\u53C2\u8003: <a class="header-anchor" href="#\u53C2\u8003" aria-hidden="true">#</a></h1><p><a href="https://en.wikipedia.org/wiki/Radix_tree" target="_blank" rel="noopener noreferrer">https://en.wikipedia.org/wiki/Radix_tree</a><br><a href="https://github.com/julienschmidt/httprouter" target="_blank" rel="noopener noreferrer">https://github.com/julienschmidt/httprouter</a><br><a href="https://github.com/armon/go-radix" target="_blank" rel="noopener noreferrer">https://github.com/armon/go-radix</a></p>',16),r=[o];function c(i,d,y,h,C,A){return n(),a("div",null,r)}var _=s(l,[["render",c]]);export{u as __pageData,_ as default};
